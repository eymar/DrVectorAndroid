package test

import com.drvector.VectorDrawableFixinator
import org.junit.Test

import org.junit.Assert.*

class VectorDrawableFixinatorTest {

    @Test
    fun getContentWithFixedFloatingPoints() {
        val input = "1.255.58-.15"
        val output = VectorDrawableFixinator.getContentWithFixedFloatingPoints(input)

        assertTrue("1.255 0.58 -0.15".equals(output))

    }

    @Test
    fun getContentWithFixedFloatingPoints2() {
        val input = "1.255 .58 -.15"
        val output = VectorDrawableFixinator.getContentWithFixedFloatingPoints(input)

        assertTrue("1.255 0.58 -0.15".equals(output))

    }

    @Test
    fun getContentWithFixedFloatingPoints3() {
        val input = "1.255\n.58\n-.15"
        val output = VectorDrawableFixinator.getContentWithFixedFloatingPoints(input)

        assertTrue("1.255 0.58 -0.15".equals(output))
    }

    @Test
    fun getContentWithFixedFloatingPointsRealFile1() {
        val input = "M13.152 21.841l3.421 .176a1 1 0 0 1 .8 .474l1.795 2.919 1.225-3.2a.997 .997 0 0 1 .698-.614l3.329-.805-2.664-2.152a.996 .996 0 0 1-.368-.855l.262-3.415-2.87 1.869a1.008 1.008 0 0 1-.926 .085l-3.166-1.305 .889 3.308c.085 .317 .009 .657-.204 .909l-2.221 2.607zm6.094 6.055a1.6 1.6 0 0 1-1.368-.765l-1.933-3.143-3.683-.19a1.598 1.598 0 0 1-1.396-.97 1.6 1.6 0 0 1 .252-1.681l2.391-2.81-.958-3.56a1.6 1.6 0 0 1 .491-1.627 1.597 1.597 0 0 1 1.677-.283h.001l3.41 1.407 3.091-2.011a1.598 1.598 0 0 1 1.701-.034c.53 .314 .831 .892 .783 1.508l-.283 3.676 2.869 2.32c.48 .386 .694 1.002 .559 1.604a1.6 1.6 0 0 1-1.193 1.212l-3.585 .867-1.318 3.445a1.6 1.6 0 0 1-1.508 1.035zm15.371 15.716a1 1 0 0 1-.99-.865c-.987-7.255-3.668-11.632-8.696-14.194a.998 .998 0 0 1-.436-1.344 .996 .996 0 0 1 1.345-.437c5.672 2.89 8.685 7.734 9.77 15.705a1.001 1.001 0 0 1-.993 1.135M155.77 12.658h.01-.01zm-17.766 7.432l3.362 .658a.996 .996 0 0 1 .724 .584l1.364 3.14 1.665-2.992c.16-.287 .45-.477 .779-.51l3.409-.324-2.332-2.51a1.002 1.002 0 0 1-.244-.897l.745-3.342-3.106 1.443a1.01 1.01 0 0 1-.93-.046l-2.95-1.741 .414 3.4c.039 .326-.085 .652-.331 .87l-2.57 2.267zm5.409 6.873c-.028 0-.055 0-.082-.002a1.601 1.601 0 0 1-1.398-.968l-1.468-3.384-3.62-.708a1.602 1.602 0 0 1-1.244-1.16 1.601 1.601 0 0 1 .488-1.628l2.766-2.441-.445-3.662a1.6 1.6 0 0 1 .719-1.542 1.602 1.602 0 0 1 1.7-.038l3.175 1.874 3.344-1.552a1.595 1.595 0 0 1 1.687 .203 1.6 1.6 0 0 1 .565 1.605l-.802 3.6 2.51 2.703a1.6 1.6 0 0 1 .327 1.668 1.597 1.597 0 0 1-1.353 1.03l-3.671 .35-1.793 3.225a1.6 1.6 0 0 1-1.405 .827zM7.386 53.179l-1.518-2.588 2.588-1.516a1.001 1.001 0 1 0-1.011-1.726l-2.588 1.518L3.34 46.28a1 1 0 1 0-1.725 1.011l1.517 2.588-2.588 1.517a1 1 0 1 0 1.012 1.725l2.588-1.517 1.516 2.588a1 1 0 0 0 1.726-1.012m138.248 20.733l1.966-2.266 2.266 1.966a1 1 0 1 0 1.31-1.511l-2.265-1.965 1.966-2.267a1 1 0 1 0-1.511-1.311l-1.965 2.266-2.267-1.966a1 1 0 1 0-1.311 1.51l2.266 1.967-1.966 2.266a1 1 0 0 0 1.51 1.31m-13.906-27.6c-.422 0-.813-.27-.951-.69-1.968-6.056-.673-11.612 4.197-18.016a1 1 0 1 1 1.592 1.211c-4.432 5.828-5.631 10.82-3.887 16.184a1.001 1.001 0 0 1-.951 1.31M116 10.235c-1.103 0-2 .897-2 2s.897 2 2 2 2-.897 2-2-.897-2-2-2m0 6c-2.206 0-4-1.794-4-4s1.794-4 4-4 4 1.794 4 4-1.794 4-4 4M12.689 80.999a1 1 0 0 1-1-1v-5.982a1 1 0 0 1 1-1h4.98v-6.364a1 1 0 0 1 1-1h7.825a1 1 0 0 1 0 2h-6.825v6.364a1 1 0 0 1-1 1h-4.98v4.982a1 1 0 0 1-1 1m147.353-32.526l4.196 2.72 2.72-4.197-4.196-2.719-2.72 4.196zm4.49 5.103a.989 .989 0 0 1-.543-.162l-5.874-3.807a1 1 0 0 1-.295-1.383l3.808-5.874a1 1 0 0 1 1.383-.295l5.874 3.808a.998 .998 0 0 1 .295 1.382l-3.808 5.874a1.001 1.001 0 0 1-.84 .457zm-75.58-27.852h.01-.01zm.421 .906v.001h-.002 .002zm-7.472 3.687h.001zm-22.83-23.77l1.621 .317c.323 .063 .594 .281 .726 .584l.656 1.514 .803-1.443a1 1 0 0 1 .78-.509l1.644-.157-1.125-1.21a1.001 1.001 0 0 1-.245-.898l.36-1.612-1.498 .695a1.006 1.006 0 0 1-.93-.045l-1.422-.84 .2 1.64c.04 .326-.085 .651-.332 .87l-1.238 1.093zm2.94 5.155c-.024 0-.048 0-.072-.002a1.404 1.404 0 0 1-1.226-.849l-.92-2.126-2.276-.445a1.403 1.403 0 0 1-1.09-1.016 1.404 1.404 0 0 1 .427-1.429l1.738-1.534-.28-2.3a1.405 1.405 0 0 1 .63-1.352 1.397 1.397 0 0 1 1.49-.033l1.996 1.177 2.1-.975a1.402 1.402 0 0 1 1.481 .178c.421 .34 .611 .88 .493 1.41L66 4.665l1.578 1.698a1.4 1.4 0 0 1 .285 1.463 1.4 1.4 0 0 1-1.185 .903l-2.308 .221-1.126 2.025a1.403 1.403 0 0 1-1.232 .726z"
        val expected = "M13.152 21.841l3.421 0.176a1 1 0 0 1 0.8 0.474l1.795 2.919 1.225-3.2a 0.997 0.997 0 0 1 0.698 -0.614l3.329 -0.805-2.664-2.152a 0.996 0.996 0 0 1 -0.368 -0.855l 0.262-3.415-2.87 1.869a1.008 1.008 0 0 1 -0.926 0.085l-3.166-1.305 0.889 3.308c 0.085 0.317 0.009 0.657 -0.204 0.909l-2.221 2.607zm6.094 6.055a1.6 1.6 0 0 1-1.368 -0.765l-1.933-3.143-3.683 -0.19a1.598 1.598 0 0 1-1.396 -0.97 1.6 1.6 0 0 1 0.252-1.681l2.391-2.81 -0.958-3.56a1.6 1.6 0 0 1 0.491-1.627 1.597 1.597 0 0 1 1.677 -0.283h 0.001l3.41 1.407 3.091-2.011a1.598 1.598 0 0 1 1.701 -0.034c 0.53 0.314 0.831 0.892 0.783 1.508l -0.283 3.676 2.869 2.32c 0.48 0.386 0.694 1.002 0.559 1.604a1.6 1.6 0 0 1-1.193 1.212l-3.585 0.867-1.318 3.445a1.6 1.6 0 0 1-1.508 1.035zm15.371 15.716a1 1 0 0 1 -0.99 -0.865c -0.987-7.255-3.668-11.632-8.696-14.194a 0.998 0.998 0 0 1 -0.436-1.344 0.996 0.996 0 0 1 1.345 -0.437c5.672 2.89 8.685 7.734 9.77 15.705a1.001 1.001 0 0 1 -0.993 1.135M155.77 12.658h 0.01 -0.01zm-17.766 7.432l3.362 0.658a 0.996 0.996 0 0 1 0.724 0.584l1.364 3.14 1.665-2.992c 0.16 -0.287 0.45 -0.477 0.779 -0.51l3.409 -0.324-2.332-2.51a1.002 1.002 0 0 1 -0.244 -0.897l 0.745-3.342-3.106 1.443a1.01 1.01 0 0 1 -0.93 -0.046l-2.95-1.741 0.414 3.4c 0.039 0.326 -0.085 0.652 -0.331 0.87l-2.57 2.267zm5.409 6.873c -0.028 0 -0.055 0 -0.082 -0.002a1.601 1.601 0 0 1-1.398 -0.968l-1.468-3.384-3.62 -0.708a1.602 1.602 0 0 1-1.244-1.16 1.601 1.601 0 0 1 0.488-1.628l2.766-2.441 -0.445-3.662a1.6 1.6 0 0 1 0.719-1.542 1.602 1.602 0 0 1 1.7 -0.038l3.175 1.874 3.344-1.552a1.595 1.595 0 0 1 1.687 0.203 1.6 1.6 0 0 1 0.565 1.605l -0.802 3.6 2.51 2.703a1.6 1.6 0 0 1 0.327 1.668 1.597 1.597 0 0 1-1.353 1.03l-3.671 0.35-1.793 3.225a1.6 1.6 0 0 1-1.405 0.827zM7.386 53.179l-1.518-2.588 2.588-1.516a1.001 1.001 0 1 0-1.011-1.726l-2.588 1.518L3.34 46.28a1 1 0 1 0-1.725 1.011l1.517 2.588-2.588 1.517a1 1 0 1 0 1.012 1.725l2.588-1.517 1.516 2.588a1 1 0 0 0 1.726-1.012m138.248 20.733l1.966-2.266 2.266 1.966a1 1 0 1 0 1.31-1.511l-2.265-1.965 1.966-2.267a1 1 0 1 0-1.511-1.311l-1.965 2.266-2.267-1.966a1 1 0 1 0-1.311 1.51l2.266 1.967-1.966 2.266a1 1 0 0 0 1.51 1.31m-13.906-27.6c -0.422 0 -0.813 -0.27 -0.951 -0.69-1.968-6.056 -0.673-11.612 4.197-18.016a1 1 0 1 1 1.592 1.211c-4.432 5.828-5.631 10.82-3.887 16.184a1.001 1.001 0 0 1 -0.951 1.31M116 10.235c-1.103 0-2 0.897-2 2s 0.897 2 2 2 2 -0.897 2-2 -0.897-2-2-2m0 6c-2.206 0-4-1.794-4-4s1.794-4 4-4 4 1.794 4 4-1.794 4-4 4M12.689 80.999a1 1 0 0 1-1-1v-5.982a1 1 0 0 1 1-1h4.98v-6.364a1 1 0 0 1 1-1h7.825a1 1 0 0 1 0 2h-6.825v6.364a1 1 0 0 1-1 1h-4.98v4.982a1 1 0 0 1-1 1m147.353-32.526l4.196 2.72 2.72-4.197-4.196-2.719-2.72 4.196zm4.49 5.103a 0.989 0.989 0 0 1 -0.543 -0.162l-5.874-3.807a1 1 0 0 1 -0.295-1.383l3.808-5.874a1 1 0 0 1 1.383 -0.295l5.874 3.808a 0.998 0.998 0 0 1 0.295 1.382l-3.808 5.874a1.001 1.001 0 0 1 -0.84 0.457zm-75.58-27.852h 0.01 -0.01zm 0.421 0.906v 0.001h -0.002 0.002zm-7.472 3.687h 0.001zm-22.83-23.77l1.621 0.317c 0.323 0.063 0.594 0.281 0.726 0.584l 0.656 1.514 0.803-1.443a1 1 0 0 1 0.78 -0.509l1.644 -0.157-1.125-1.21a1.001 1.001 0 0 1 -0.245 -0.898l 0.36-1.612-1.498 0.695a1.006 1.006 0 0 1 -0.93 -0.045l-1.422 -0.84 0.2 1.64c 0.04 0.326 -0.085 0.651 -0.332 0.87l-1.238 1.093zm2.94 5.155c -0.024 0 -0.048 0 -0.072 -0.002a1.404 1.404 0 0 1-1.226 -0.849l -0.92-2.126-2.276 -0.445a1.403 1.403 0 0 1-1.09-1.016 1.404 1.404 0 0 1 0.427-1.429l1.738-1.534 -0.28-2.3a1.405 1.405 0 0 1 0.63-1.352 1.397 1.397 0 0 1 1.49 -0.033l1.996 1.177 2.1 -0.975a1.402 1.402 0 0 1 1.481 0.178c 0.421 0.34 0.611 0.88 0.493 1.41L66 4.665l1.578 1.698a1.4 1.4 0 0 1 0.285 1.463 1.4 1.4 0 0 1-1.185 0.903l-2.308 0.221-1.126 2.025a1.403 1.403 0 0 1-1.232 0.726z"

        val output = VectorDrawableFixinator.getContentWithFixedFloatingPoints(input)

        assertTrue(expected.equals(output))
    }

    @Test
    fun getContentWithFixedFloatingPointsRealFile2() {
        val input = "M8.44 4.847a11.678 11.678 0 0 0-.787 2.084c-.506-.133-.98-.29-1.412-.47A8.043\n" +
                "8.043 0 0 1 8.44 4.848zm9.304 1.597c-.43 .18 -.898 .34 -1.4 .473 a11.735 11.735\n" +
                "0 0 0-.784-2.07 8.034 8.034 0 0 1 2.184 1.597zM16.977 11a19.905 19.905 0 0\n" +
                "0-.21-2.134 12.311 12.311 0 0 0 2.198-.786c.5 .883 .834 1.87 .965\n" +
                "2.92h-2.953zm-.756 6.498c.422 .108 .82 .234 1.195 .373 a8.042 8.042 0 0 1-1.856\n" +
                "1.283c.25-.497 .47 -1.055 .66 -1.656zm-6.444-.363C10.492 17.049 11.236 17 12\n" +
                "17c.763 0 1.507 .05 2.223 .135 C13.596 18.955 12.707 20 12 20c-.707\n" +
                "0-1.598-1.045-2.224-2.865zm-1.997 .363 c.19 .6 .41 1.159 .66 1.656a8.015 8.015 0\n" +
                "0 1-1.855-1.283c.375-.14 .771 -.265 1.194-.373zM14.971 13c-.04 .785 -.127\n" +
                "1.514-.248 2.185A20.632 20.632 0 0 0 12 15c-.934 0-1.848 .068 -2.724 .185\n" +
                "-.122-.671-.21-1.4-.25-2.185h5.946zM11.97 9.45c.97 0 1.918-.07 2.827-.197 .084\n" +
                ".548 .145 1.13 .177 1.747H9.027c.032-.614 .094 -1.193 .177 -1.74 .888 .123 1.816\n" +
                ".19 2.764 .19 zM12 4c.76 0 1.736 1.208 2.364 3.296-.768 .099 -1.572 .155 -2.396\n" +
                ".155 a18.81 18.81 0 0 1-2.336-.148C10.261 5.21 11.238 4 12 4zM5.02 8.103c.659\n" +
                ".308 1.402 .57 2.21 .777 A19.724 19.724 0 0 0 7.024 11H4.069a7.942 7.942 0 0 1\n" +
                ".952-2.897zM4.069 13h2.955c.04 .902 .14 1.755 .285 2.56a13.03 13.03 0 0 0-2.07\n" +
                ".698 A7.93 7.93 0 0 1 4.07 13zm14.69 3.259c-.623-.276-1.32-.51-2.067-.7 .143\n" +
                "-.804 .244 -1.657 .285 -2.56h2.953a7.922 7.922 0 0 1-1.17\n" +
                "3.26zm-6.758-14.26C6.487 2 2 6.488 2 12c0 5.515 4.486 10 10 10 5.513 0 10-4.485\n" +
                "10-10 0-5.512-4.488-10-10-10z"
        val expected = "M8.44 4.847a11.678 11.678 0 0 0 -0.787 2.084c -0.506 -0.133 -0.98 -0.29-1.412 -0.47A8.043 8.043 0 0 1 8.44 4.848zm9.304 1.597c -0.43 0.18 -0.898 0.34 -1.4 0.473 a11.735 11.735 0 0 0 -0.784-2.07 8.034 8.034 0 0 1 2.184 1.597zM16.977 11a19.905 19.905 0 0 0 -0.21-2.134 12.311 12.311 0 0 0 2.198 -0.786c 0.5 0.883 0.834 1.87 0.965 2.92h-2.953zm -0.756 6.498c 0.422 0.108 0.82 0.234 1.195 0.373 a8.042 8.042 0 0 1-1.856 1.283c 0.25 -0.497 0.47 -1.055 0.66 -1.656zm-6.444 -0.363C10.492 17.049 11.236 17 12 17c 0.763 0 1.507 0.05 2.223 0.135 C13.596 18.955 12.707 20 12 20c -0.707 0-1.598-1.045-2.224-2.865zm-1.997 0.363 c 0.19 0.6 0.41 1.159 0.66 1.656a8.015 8.015 0 0 1-1.855-1.283c 0.375 -0.14 0.771 -0.265 1.194 -0.373zM14.971 13c -0.04 0.785 -0.127 1.514 -0.248 2.185A20.632 20.632 0 0 0 12 15c -0.934 0-1.848 0.068 -2.724 0.185 -0.122 -0.671 -0.21-1.4 -0.25-2.185h5.946zM11.97 9.45c 0.97 0 1.918 -0.07 2.827 -0.197 0.084 0.548 0.145 1.13 0.177 1.747H9.027c 0.032 -0.614 0.094 -1.193 0.177 -1.74 0.888 0.123 1.816 0.19 2.764 0.19 zM12 4c 0.76 0 1.736 1.208 2.364 3.296 -0.768 0.099 -1.572 0.155 -2.396 0.155 a18.81 18.81 0 0 1-2.336 -0.148C10.261 5.21 11.238 4 12 4zM5.02 8.103c 0.659 0.308 1.402 0.57 2.21 0.777 A19.724 19.724 0 0 0 7.024 11H4.069a7.942 7.942 0 0 1 0.952-2.897zM4.069 13h2.955c 0.04 0.902 0.14 1.755 0.285 2.56a13.03 13.03 0 0 0-2.07 0.698 A7.93 7.93 0 0 1 4.07 13zm14.69 3.259c -0.623 -0.276-1.32 -0.51-2.067 -0.7 0.143 -0.804 0.244 -1.657 0.285 -2.56h2.953a7.922 7.922 0 0 1-1.17 3.26zm-6.758-14.26C6.487 2 2 6.488 2 12c0 5.515 4.486 10 10 10 5.513 0 10-4.485 10-10 0-5.512-4.488-10-10-10z"

        val output = VectorDrawableFixinator.getContentWithFixedFloatingPoints(input)

        assertTrue(expected.equals(output))
    }

    @Test
    fun getContentWithFixedFloatingPointsRealFile3() {
        val input = "M12 3a 0.221 0.221 0 0 0-0.21 0.13L9.136 8.508l-5.933 0.862a 0.222 0.222 0 0 0-0.19 0.16 0.221 0.221 0 0 0 0.06 0.24l4.293 4.186-1.013 5.909a 0.222 0.222 0 0 0 0.093 0.23c 0.054 0.039 0.14 0.072 0.246 0.017L12 17.322l5.307 2.79c 0.107 0.055 0.193 0.02 0.247-0.017a 0.222 0.222 0 0 0 0.093-0.23l-1.013-5.909 4.294-4.186a 0.221 0.221 0 0 0 0.06-0.24 0.222 0.222 0 0 0-0.19-0.16l-5.934-0.862L12.21 3.13A.221 0.221 0 0 0 12 3M6.582 22.142c-0.462 0-0.92-0.145-1.31-0.429a2.22 2.22 0 0 1-0.89-2.186l 0.835-4.874-3.54-3.451a2.218 2.218 0 0 1-0.566-2.29 2.22 2.22 0 0 1 1.804-1.521l4.893-0.711 2.19-4.434A2.217 2.217 0 0 1 12 1a2.22 2.22 0 0 1 2.004 1.246l2.188 4.434 4.893 0.711a2.22 2.22 0 0 1 1.804 1.521 2.218 2.218 0 0 1-0.565 2.29l-3.54 3.451 0.835 4.874a2.22 2.22 0 0 1-0.89 2.186 2.223 2.223 0 0 1-2.353 0.169L12 19.582l-4.376 2.3a2.23 2.23 0 0 1-1.042 0.26"

        val expected = "M12 3a 0.221 0.221 0 0 0-0.21 0.13L9.136 8.508l-5.933 0.862a 0.222 0.222 0 0 0-0.19 0.16 0.221 0.221 0 0 0 0.06 0.24l4.293 4.186-1.013 5.909a 0.222 0.222 0 0 0 0.093 0.23c 0.054 0.039 0.14 0.072 0.246 0.017L12 17.322l5.307 2.79c 0.107 0.055 0.193 0.02 0.247-0.017a 0.222 0.222 0 0 0 0.093-0.23l-1.013-5.909 4.294-4.186a 0.221 0.221 0 0 0 0.06-0.24 0.222 0.222 0 0 0-0.19-0.16l-5.934-0.862L12.21 3.13A 0.221 0.221 0 0 0 12 3M6.582 22.142c-0.462 0-0.92-0.145-1.31-0.429a2.22 2.22 0 0 1-0.89-2.186l 0.835-4.874-3.54-3.451a2.218 2.218 0 0 1-0.566-2.29 2.22 2.22 0 0 1 1.804-1.521l4.893-0.711 2.19-4.434A2.217 2.217 0 0 1 12 1a2.22 2.22 0 0 1 2.004 1.246l2.188 4.434 4.893 0.711a2.22 2.22 0 0 1 1.804 1.521 2.218 2.218 0 0 1-0.565 2.29l-3.54 3.451 0.835 4.874a2.22 2.22 0 0 1-0.89 2.186 2.223 2.223 0 0 1-2.353 0.169L12 19.582l-4.376 2.3a2.23 2.23 0 0 1-1.042 0.26"

        val output = VectorDrawableFixinator.getContentWithFixedFloatingPoints(input)

        assertTrue(expected.equals(output))
    }

}